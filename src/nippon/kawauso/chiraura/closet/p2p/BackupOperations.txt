位置関係
  [管理者] -(要求)-> [依頼先]
  [管理者] <-(返答)- [依頼先]


共通
  言付け
    (返答0) 断わる。

  行動
    要求を受け取った[依頼先]は、[管理者]が管理者として相応しくなかったら、[管理者]へ(返答0)を送る。

CheckStock
  言付け
    (要求1) この範囲でどんなデータ片持ってんのか教えろ。ただし、これはいらん。
    (返答1) これです。

  行動
    [管理者]は管理範囲内で自分の持ってるデータ片の一覧を添えて、[依頼先]に(要求1)を送る。

    (要求1)を受け取った[依頼先]は、指定範囲の中で、添付のデータ片一覧に無い、または、より新しい、または、同じ日時だけど内容が異なるデータ片一覧を作成し、[管理者]に(返答1)を送る。

Recovery
  言付け
    (要求1) このデータ片くれ。
    (要求2) このデータ片の差分くれ。
    (返答1) これがデータ片です。
    (返答2) これが差分です。適用したらこうなります。
    (返答3) 無いよ。

  行動
    [管理者]はデータ片を持っていなかったら、[依頼先]に(要求1)を送る。
    データ片を持っていたら、[依頼先]に(要求2)を送る。

    (要求1)を受け取った[依頼先]は、データ片を持っていたら、[管理者]に(返答1)を送る。
    データ片を持っていなかったら、[管理者]に(返答3)を送る。

    (要求2)を受け取った[依頼先]は、データ片を持っていたら、[管理者]に(返答1)を送る。
    データ片を持っていなかったら、[管理者]に(返答3)を送る。


CheckDemand
  言付け
    (要求1) この中で持ってないやつ教えろ。
    (返答1) これです。

  行動
    [管理者]は管理範囲内で自分の持ってるデータ片の一覧を作成して、[依頼先]に(要求1)を送る。

    (要求1)を受け取った[依頼先]は、添付のデータ片一覧の中でに持っていない、または、持っているけど古い、または、持ってて同じ日時だけど内容が違うデータ片一覧を作成し、[管理者]に(返答1)を送る。


Backup
  言付け
    (要求1) このデータ片を保存しろ。
    (要求1) この差分を保存しろ。
    (返答1) できました。
    (返答2) 保存したらこんなんなりました。
    (返答3) 無いよ。
